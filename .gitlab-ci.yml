variables:
  CONAN_REFERENCE: "libxml2/2.9.8"
  CONAN_USERNAME: "sigth"
  CONAN_LOGIN_USERNAME: "sight"
  CONAN_CHANNEL: "stable"
  CONAN_STABLE_BRANCH_PATTERN: "stable/*"
  CONAN_UPLOAD_ONLY_WHEN_STABLE: 1
  CONAN_ARCHS: x86_64

stages:
  - build

msvc2015:
  image: registry.lan.local:5000/docker-envdev-msvc2015:dev
  stage: build
  script:
    - python build.py
  tags:
    - docker
    - windows

msvc2017:
  image: registry.lan.local:5000/docker-envdev-msvc2017:dev
  stage: build
  script:
    - python build.py
  tags:
    - docker
    - windows
    
macos:
  stage: build
  variables:
    CONAN_APPLE_CLANG_VERSIONS: "9.1"
    CONAN_USER_HOME: $CI_PROJECT_DIR
  script:
    - pip3 install conan_package_tools
    - pip3 install conan
    - python3 build.py
  tags:
    - macos